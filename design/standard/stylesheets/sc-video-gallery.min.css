function onYouTubeIframeAPIReady(){SC.apiIsLoaded=!0}var SC={player:null,apiIsLoaded:!1,playerStatus:null,debug:!1,specialStatus:null,log:function(e){SC.debug&&window.console&&console.log("SC-Debug: "+e)}};!function(e){var n={moduleUrl:"/scvg/playlist/",layerId:"sc-layer",eventPrefix:"scvg",enableLayerClose:0,videoContainer:"sc-video-container",animate:{close:!1},ytPlayerVars:{autoplay:1,version:3,enablejsapi:1,fs:1,hl:"de",modestbranding:1,rel:0,showinfo:0,cc_load_policy:1,autohide:1,html5:1,origin:window.location.origin},translations:{de:{"short-description":"Kurzbeschreibung des Videos","close-gallery":"Videogalerie schlie√üen","long-description":"Textfassung des Videos"}},lang:"de"},a="https://www.googleapis.com/youtube/v3/",t={key:"insert_the_google_project_key_here",key:"AIzaSyCZqm0LXDXr6eviOzzv7Z0EvmM6WaRsNaM",part:"snippet",maxResults:15},s={},o={navDescIcon:"i.fa-info-circle",navLongDesc:"fa-bars",navLongDescGeneral:"i.long-desc",navVideo:"fa-file-video-o",navCloseIcon:"i.fa-times",topNavigation:".sc-operating-panel",longDescription:"sc-long-desc",navPanel:"#sc-navigation",descContainer:"#sc-description"},l={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},r={process:function(o){var l=null,d=null,c=null;if(l=r.detectYoutubePlaylist(o)){s=l,d=a+"playlistItems?";var p=e.extend({},t,{playlistId:l.list});c=[];for(i in p)c.push(i+"="+p[i]);c=c.join("&")}else{var v=o.indexOf(location.hostname)+location.hostname.length+1;d=n.moduleUrl,c=o.slice(v).replace(/\//g,"|"),c=encodeURIComponent(c)}d+=c,e.get(d,function(n){if(n="string"===e.type(n)?e.parseJSON(n):n,"shortcut#playlistListResponse"==n.kind){s=n.playlistParams;for(var i=[],o=a+"videos?",l=[],d=0;d<n.pageInfo.totalResults;d++)i.push(n.dataMaps[d].id);for(key in t)l.push(key+"="+t[key]);l.push("id="+i.join(",")),o+=l.join("&"),e.get(o,function(e){n.items=e.items,r.insertVideoDetails(n)})}else r.insertVideoDetails(n)})},insertVideoDetails:function(i){var a=e(r.createLayout()),t=e("#sc-navigation",a),l=i.pageInfo.totalResults,d=-1;1===n.enableLayerClose&&a.on("click."+n.eventPrefix,r.end),e(window).on("resize."+n.eventPrefix,function(){r.resize.apply(a)});for(var c=0;l>c;c++){var p=i.items[c],v=e("<img />",{src:p.snippet.thumbnails.default.url}),u=e("<h4 />").text(p.snippet.title),g=null,f=null,y=null,h=null,C="",m=["sc-nav-item","clearfix"];if("shortcut#playlistListResponse"==i.kind){h=p.id;var S=i.dataMaps[c].longdesc;S&&(C=e("<div />",{"class":"template long-desc"}).text(S))}else h=p.snippet.resourceId.videoId;h==s.v&&(m.push("active"),d=c);var y=e("<div />",{"class":m.join(" "),"data-ytid":h}).append('<a href="#" ></a>').append(C).appendTo(t);f=y.children("a"),p.snippet.description&&(g=e("<p />",{"class":"description"}).text(p.snippet.description),0==c&&(e(o.navDescIcon,o.topNavigation).removeClass("hidden"),g.clone().appendTo(o.descContainer))),f.append(v,e("<div />").append(u,g))}e("body").addClass("sc-no-overflow").append(a),r.resize.apply(e("#"+n.layerId)),r.loadFirstVideo(d),e(t).perfectScrollbar({suppressScrollX:!0}),e("#"+o.longDescription).perfectScrollbar({suppressScrollX:!0})},loadVideo:function(){var n=e(o.topNavigation),i=this.find(".long-desc"),a=this.find("p.description");SC.player.loadVideoById(this.data("ytid")),this.siblings().removeClass("active").end().addClass("active"),r.insertLongDesc.apply(i,[n]),r.insertDescription.apply(a,[n])},loadFirstVideo:function(i){var a=e(o.topNavigation),t=e(o.navDescIcon,a),l=e(o.navPanel).children(".sc-nav-item").eq(i),d=l.find(".long-desc"),c=l.find(".description");e(o.navCloseIcon,a).on("click."+n.eventPrefix,r.end),e(o.navLongDescGeneral,a).on("click."+n.eventPrefix,function(){r.toggleLongDescription.apply(e(this))}),r.insertLongDesc.apply(d,[a]),c.length>0&&r.insertDescription.apply(c),t.on("click."+n.eventPrefix,r.toggleDesc),e(".sc-nav-item").on("click."+n.eventPrefix,function(){return r.loadVideo.apply(e(this)),!1}),SC.player=new YT.Player("sc-player",{videoId:s.v,playerVars:n.ytPlayerVars,events:{onReady:r.events.onReady,onStateChange:r.events.onStateChange,onError:r.events.onError}})},insertLongDesc:function(n){n=n?n:e(o.topNavigation);var i=this,a=e("#"+o.longDescription);a.empty(),i.length>0?(r.toggleLongDescription.apply(e(o.navLongDescGeneral,n),["video",!1]),i.first().clone().removeClass("template").appendTo(a)):r.toggleLongDescription.apply(e(o.navLongDescGeneral,n),["disable"])},insertDescription:function(n){n=n?n:e(o.topNavigation);var i=e(o.descContainer),a=this;i.empty(),a.length>0?(e(o.navDescIcon,n).removeClass("hidden"),a.clone().appendTo(i)):e(o.navDescIcon,n).addClass("hidden")},toggleDesc:function(){var n=e(o.navDescIcon,o.topNavigation),i=!1;null===SC.specialStatus?(i=!0,SC.specialStatus="desc"):"desc"==SC.specialStatus&&(i=!0,SC.specialStatus=null),i&&(n.toggleClass("active"),e(o.descContainer).toggle("fast"))},toggleLongDescription:function(n,i){switch(n&&"toggle"!=n||(n=this.hasClass(o.navLongDesc)?"ld":"video"),i=void 0!=i?i:!0,n){case"disable":this.addClass("hidden"),i=!1;break;case"ld":if(null!==SC.specialStatus)return;this.removeClass("hidden "+o.navLongDesc).addClass(o.navVideo+" active"),SC.specialStatus="ld",(1==SC.playerStatus||3==SC.playerStatus)&&SC.player.pauseVideo();break;case"video":this.removeClass("hidden active "+o.navVideo).addClass(o.navLongDesc),SC.specialStatus=null,2==SC.playerStatus&&SC.player.playVideo();break;default:throw"not a valid status in toggleLongDesc()"}i&&e("#"+o.longDescription).slideToggle(400).perfectScrollbar("update")},resize:function(){var i=e("."+n.videoContainer),a=this.find("iframe"),t=(e(window).height()-i.height())/2;if(this.offset({top:window.scrollY}),i.css("marginTop",t),a.length>0){var s=a.first().width(),l=i.width()-s;e(o.navPanel).width(l),e(o.descContainer).css("maxWidth",s)}},end:function(){n.animate.close&&Modernizr.cssanimations?(SC.player.pauseVideo(),e("."+n.videoContainer).addClass("animate-out")):r.remove()},remove:function(){SC.specialStatus=null,e("#"+n.layerId).remove(),e("body").removeClass("sc-no-overflow")},detectYoutubePlaylist:function(e){if(e.indexOf("https://www.youtube.com")>-1){var n={};e=e.split("?").pop().split("&");for(var i=0;i<e.length;i++){var a=e[i].split("=");n[a[0]]=a[1]}if("v"in n&&"list"in n)return n}return null},createLayout:function(){return'<div id="'+n.layerId+'"><div class="'+n.videoContainer+' hidden" ><div class="sc-operating-panel"><i title="'+r.trans("short-description")+'" class="fa fa-info-circle fa-2x fa-fw hidden"></i><i title="'+r.trans("long-description")+'" class="fa fa-bars fa-2x fa-fw long-desc hidden"></i><i title="'+r.trans("close-gallery")+'" class="fa fa-times fa-2x fa-fw"></i></div><div class="sc-ratio-wrapper"><div id="sc-navigation" ></div><div id="sc-description"></div><div id="sc-player"></div></div><div id="'+o.longDescription+'"></div></div></div'},trans:function(e){return void 0!==n.translations[n.lang][e]?n.translations[n.lang][e]:null},events:{onReady:function(){var i=e("#"+n.layerId);n.animate.close&&e("."+n.videoContainer).on(l[Modernizr.prefixed("animation")],r.remove),e("."+n.videoContainer).removeClass("hidden"),i.addClass("simple"),r.resize.apply(i)},onStateChange:function(e){SC.playerStatus=e.data,SC.log("statechange to "+e.data)},onError:function(e){SC.log(e.data)}}};e.fn.scVideoGallery=function(i){return e.extend(n,i),this.length>0&&e.get("/scvg/apikey",function(e){n.ytPlayerVars.key=e}),this.each(function(){var i=e(this);i.on("click."+n.eventPrefix,{url:i.prop("href")},function(e){return e.preventDefault(),e.stopPropagation(),r.process.apply(i,[e.data.url]),!1})})}}(jQuery);
